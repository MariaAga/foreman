<!DOCTYPE html>
<html lang="<%= I18n.locale %>" data-timezone="<%= iana_timezone %>" class="<%= User.current ? "" : "no-js"%>">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title><%= h(yield(:title) || "Foreman") %></title>
    <meta name="description" content="">
    <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1.0, maximum-scale=1.0"/>
    <%= yield(:meta) %>
    <%= favicon_link_tag "favicon.ico"%>
    <%= css_chunks %>
    <%= stylesheet_link_tag 'application' %>
    <%= yield(:stylesheets) %>
    <%= csrf_meta_tags %>
    <script type="text/javascript">
      var URL_PREFIX = '<%= controller.relative_url_root %>';

      <% if protect_against_forgery? %>
        var AUTH_TOKEN = '<%= form_authenticity_token %>';
      <% else %>
        var AUTH_TOKEN = null
      <% end %>

      <% if SETTINGS[:mark_translated] && !Rails.env.test? %>
        var I18N_MARK = true;
      <% end %>
    </script>
    <%= javascript_include_tag "locale/#{FastGettext.locale}/app" %>
    <%= locale_js_tags %>
    <%= stylesheet_link_tag('bundle', :extension => 'css') %>
    <%= yield(:head) %>
  </head>
  <body class='<%= body_css_classes %>' id='body-test'>
    <%= js_chunks %>
    <%= javascript_include_tag('vendor') %>
    <%= javascript_include_tag('bundle') %>
    <%= javascript_include_tag 'application' %>
    <%=  javascript_tag("window.tfm.tools.loadPluginModule('/webpack/katello','katello','./common_index');".html_safe) %>
    <%= webpacked_plugins_with_global_js %>
    <%= remote_webpack %>
    <%= yield(:javascripts) %>
    <script type="text/javascript">
      <%= yield(:inline_javascripts) %>
    </script>
    <!--[if lte IE 9]>
      <%= _('You are using an unsupported browser.') %>
      <%= _('See list of supported browsers: %s') % documentation_url("3.1.4BrowserCompatibility") %>
    <![endif]-->
    <% if User.current %>
      <% cache(TopbarSweeper.fragment_name, :skip_digest => true) do %>
        <%= mount_react_app %>
      <% end %>
      <div
        id="rails-app-content"
        class="pf-c-page"
      >
        <%= yield(:content) %>
      </div>
    <% else %>
      <%= yield(:content) %>
    <% end %>
  </body>
</html>
